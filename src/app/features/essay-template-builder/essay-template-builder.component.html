<form novalidate [formGroup]="form" class="">
  <app-page-title [title]="title" [showBack]="true" (backEvent)="exit()">
    <ng-container toolbar-left>
      <div class="ml-3">
        <ng-container formGroupName="essayTemplate">
          <input
            #nameInput
            placeholder="Nombre"
            type="text"
            pInputText
            id="name"
            formControlName="name"
            class="name-input w-15rem"
            [appSelectOnFocus]="true"
            [(appFocused)]="nameInputFocused"
            [ngClass]="{
              'cursor-pointer': !nameInputFocused,
              'border-none': !nameInputFocused && nameInput.value
            }"
          />
        </ng-container>
      </div>
    </ng-container>

    <ng-container toolbar-right>
      <div class="flex align-items-center">
        <div class="mr-2">
          <app-validator-messages
            *ngIf="form.errors && form.dirty"
            [errors]="form.errors"
          ></app-validator-messages>
        </div>

        <p-splitButton
          label="Guardar"
          styleClass="p-button-success"
          [disabled]="saveButtonDisabled"
          [model]="saveButtonMenuItems"
          appendTo="body"
          (onClick)="save()"
        ></p-splitButton>
      </div>
    </ng-container>
  </app-page-title>

  <ng-container *ngIf="steps$ | async as steps">
    <app-steps-sequence-table
      [inputFormArray]="form.get('essayTemplateSteps')"
      [savedEssayTemplateSteps]="savedEssayTemplateSteps"
      [stepOptions]="steps"
    ></app-steps-sequence-table>
  </ng-container>
</form>
