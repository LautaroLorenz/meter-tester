<form novalidate [formGroup]="form">
  <app-page-title [title]="title" [showBack]="true" (backEvent)="exit()">
    <ng-container toolbar-right>
      <div class="flex align-items-center">
        <div class="mr-2">
          <app-validator-messages
            *ngIf="form.errors && form.dirty"
            [errors]="form.errors"
          ></app-validator-messages>
        </div>

        <p-splitButton
          label="Guardar"
          styleClass="p-button-success"
          [disabled]="saveButtonDisabled"
          [model]="saveButtonMenuItems"
          appendTo="body"
          (onClick)="save()"
        ></p-splitButton>
      </div>
    </ng-container>
  </app-page-title>

  <ng-container formGroupName="essayTemplate">
    <div class="formgrid grid mx-3 mt-5">
      <div class="field col col-3">
        <div class="flex flex-column gap-2">
          <label for="name"
            >Nombre<span class="ml-1 text-red-300">*</span></label
          >
          <input pInputText id="name" formControlName="name" />
        </div>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="steps$ | async as steps">
    <app-steps-sequence-table
      [inputFormArray]="form.get('essayTemplateSteps')"
      [savedEssayTemplateSteps]="savedEssayTemplateSteps"
      [stepOptions]="steps"
    ></app-steps-sequence-table>
  </ng-container>
</form>
