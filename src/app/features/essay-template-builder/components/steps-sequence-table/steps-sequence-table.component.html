<app-add-step-to-sequence
  [stepOptions]="stepOptions"
  (selectedStep)="addEssayTemplateStepControlByStep($event)"
></app-add-step-to-sequence>

<app-edit-step-in-sequence
  [essayTemplateStep]="selectedEssayTemplateStepToEdit.step"
  (dialogHide)="editStepInSequenceDialogHide()"
  (essayTemplateStepChange)="saveEditedStepInSequenceChanges($event)"
></app-edit-step-in-sequence>

<app-abm
  [dataset]="formArray.value"
  [columns]="EssayTemplateStepTableColumns"
  [tableColumnButtonsTemplate]="tableColumnButtonsTemplate"
  [toolbar]="false"
  [paginator]="false"
  [deleteButton]="false"
  actionColumnStyleClass="w-16rem"
>
  <ng-template
    #tableColumnButtonsTemplate
    let-element="element"
    let-index="index"
  >
    <p-button
      icon="pi pi-arrow-down"
      [outlined]="true"
      [rounded]="true"
      [text]="true"
      pTooltip="Bajar orden de ejecución"
      tooltipPosition="bottom"
      [showDelay]="1250"
      [disabled]="index === 0 || index === formArray.length - 1"
      [tooltipDisabled]="index === 0 || index === formArray.length - 1"
      (click)="moveDownByIndex(index)"
    ></p-button>

    <p-button
      icon="pi pi-arrow-up"
      [outlined]="true"
      [rounded]="true"
      [text]="true"
      pTooltip="Subir orden de ejecución"
      tooltipPosition="bottom"
      [showDelay]="1250"
      [disabled]="index === 0 || index === 1"
      [tooltipDisabled]="index === 0 || index === 1"
      (click)="moveUpByIndex(index)"
    ></p-button>

    <button
      pButton
      pRipple
      icon="pi pi-file-edit"
      class="p-button-outlined p-button-rounded p-button-text p-button-primary mr-2 p-button-lg"
      pTooltip="Ajustar parámetros"
      tooltipPosition="bottom"
      (click)="editEssayTemplateStep(element, index)"
    ></button>

    <button
      pButton
      pRipple
      icon="pi pi-trash"
      class="p-button-outlined p-button-rounded p-button-text p-button-danger"
      [disabled]="index === 0"
      pTooltip="Remover paso"
      (click)="deleteEssayTemplateStepControl(index)"
    ></button>
  </ng-template>
</app-abm>
