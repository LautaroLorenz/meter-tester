<fom novalidate [formGroup]="form">
  <ng-container formGroupName="form_control_raw">
    <div class="flex flex-column gap-4">
      <div class="formgrid grid">
        <div class="field col col-6">
          <label for="name"
            >Nombre<span
              *ngIf="!!form.get('form_control_raw.name')?.validator"
              class="ml-1 text-red-300"
              >*</span
            >
          </label>
          <input type="text" pInputText id="name" formControlName="name" />
          <app-input-error formControlName="name"></app-input-error>
        </div>

        <div class="field col col-6">
          <label for="meterConstant" class="mb-2"
            >Constante del medidor<span class="ml-1 text-red-300">*</span>
          </label>
          <p-selectButton
            [options]="MeterConstants"
            id="meterConstant"
            formControlName="meterConstant"
            optionLabel="name"
            optionValue="id"
          ></p-selectButton>
          <app-input-error formControlName="meterConstant"></app-input-error>
        </div>
      </div>

      <div class="formgrid grid">
        <div class="field col col-6">
          <label for="maxAllowedError" class="mb-2"
            >MÃ¡ximo error permitido en el puesto [%]<span
              class="ml-1 text-red-300"
              >*</span
            >
          </label>
          <p-inputNumber
            styleClass="flex flex-1"
            id="maxAllowedError"
            formControlName="maxAllowedError"
            autofocus
            [useGrouping]="false"
            mode="decimal"
            [min]="0"
            [minFractionDigits]="0"
            [maxFractionDigits]="2"
          ></p-inputNumber>
          <app-input-error formControlName="maxAllowedError"></app-input-error>
        </div>

        <div class="field col col-6">
          <label for="meterPulses" class="mb-2"
            >Cantidad de impulsos del medidor<span class="ml-1 text-red-300"
              >*</span
            >
          </label>
          <p-inputNumber
            styleClass="flex flex-1"
            id="meterPulses"
            formControlName="meterPulses"
            autofocus
            [useGrouping]="false"
            [min]="0"
          ></p-inputNumber>
          <app-input-error formControlName="meterPulses"></app-input-error>
        </div>
      </div>

      <div class="formgrid grid">
        <div class="field col col-4">
          <app-phase-form-group
            [formGroup]="form.get('form_control_raw.phaseL1') | asFormGroup"
            faseLabel="L1"
            voltageFormControlName="voltage"
            voltageLabel="U1"
            currentFormControlName="current"
            currentLabel="I1"
            angleFormControlName="anglePhi"
            angleLabel="&#632;1"
          ></app-phase-form-group>
        </div>

        <div class="field col col-4">
          <app-phase-form-group
            [formGroup]="form.get('form_control_raw.phaseL2') | asFormGroup"
            faseLabel="L2"
            voltageFormControlName="voltage"
            voltageLabel="U2"
            currentFormControlName="current"
            currentLabel="I2"
            angleFormControlName="anglePhi"
            angleLabel="&#632;2"
          ></app-phase-form-group>
        </div>

        <div class="field col col-4">
          <app-phase-form-group
            [formGroup]="form.get('form_control_raw.phaseL3') | asFormGroup"
            faseLabel="L3"
            voltageFormControlName="voltage"
            voltageLabel="U3"
            currentFormControlName="current"
            currentLabel="I3"
            angleFormControlName="anglePhi"
            angleLabel="&#632;3"
          ></app-phase-form-group>
        </div>
      </div>
    </div>
  </ng-container>
</fom>
